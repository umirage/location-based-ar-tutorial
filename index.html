<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>GeoAR.js demo</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
	<script src="https://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v$npm_package_version/dist/aframe-physics-system.min.js"></script>
	<script src="https://raw.githack.com/jeromeetienne/AR.js/master/aframe/build/aframe-ar.min.js"></script>
    <script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
    <script>
        THREEx.ArToolkitContext.baseURL = 'https://raw.githack.com/jeromeetienne/ar.js/master/three.js/'
    </script>
	<script src="./assets/js/cube-env-map.js"></script>
	<script src="./assets/js/camera-cube-env.js"></script>
	<script src="./assets/js/refract-cube-env.js"></script>
	
</head>

<body style='margin: 0; overflow: hidden;'>
	<script>
		AFRAME.registerComponent('locationfinder',{
			init : function() {
				navigator.geolocation.getCurrentPosition(function(location){
					console.log(location);
				});
			}
		});
	</script>
	<script>
		AFRAME.registerComponent('rotation-reader', {
		  /**
		   * We use IIFE (immediately-invoked function expression) to only allocate one
		   * vector or euler and not re-create on every tick to save memory.
		   */
			tick: (function () {
				var position = new THREE.Vector3();
				var rotation = new THREE.Euler();

				return function () {
					this.el.object3D.getWorldPosition(position);
					this.el.object3D.getWorldRotation(rotation);
				  // position and rotation now contain vector and euler in world space.
				};
		  })
		});
	</script>
	
    <a-scene
        vr-mode-ui="enabled: false"
		embedded
        arjs="sourceType: webcam; sourceWidth:1280; sourceHeight:960; displayWidth: 1280; displayHeight: 960; debugUIEnabled: false;"
		renderer="antialias: true; colorManagement: true; toneMapping: ACESFilmic;" >
		
		<a-assets>
			<a-cubemap id="cube-env-map">
			  <img src="./assets/hdr/px.png">
			  <img src="./assets/hdr/nx.png">
			  <img src="./assets/hdr/py.png">
			  <img src="./assets/hdr/ny.png">
			  <img src="./assets/hdr/pz.png">
			  <img src="./assets/hdr/nz.png">
			</a-cubemap>
			<img id="sky" src="./assets/hdr/enviromentRGBD.png">
			<img id="aoCZ" src="./assets/textures/AO_CZ_sm.png">
			<img id="aoFR" src="./assets/textures/AO_FR_sm.png">
			<img id="aoND" src="./assets/textures/AO_ND_sm.png">		
	    </a-assets>
        
        <a-camera gps-camera="simulateLatitude:50.10554663042668; simulateLongitude:14.452106764832306" rotation-reader ></a-camera>
		<!-- add 3D model -->
		<!--gps-camera="simulateLatitude:50.107992; simulateLongitude:14.447977"-->
		<!-- home location 50.09870375941795, 14.445555805758241 -->
		<!-- home location2 50.10528272919711, 14.452779104818152-->
		
		<!-- 50.86773683981976, 4.344428916831181 real place -->
		<!-- look-at="[gps-camera]" -->
		<!-- gltf-model="./assets/text/Text-circle-anim.gltf"  -->
		<a-entity
			gltf-model="./assets/Text-circle-CZ.gltf" 
			animation-mixer="timeScale: 0.5"
			rotation="0 0 0"
			scale="1 1 1"
			gps-entity-place="latitude: 50.10554663042668; longitude: 14.452106764832306" 
			camera-cube-env="distance: 5000; resolution: 512; repeat: true; interval: 600"
			>
		</a-entity>
		<a-entity
			gltf-model="./assets/Text-circle-FR.gltf" 
			animation-mixer="timeScale: 0.5"
			rotation="0 0 0"
			scale="1 1 1"
			gps-entity-place="latitude: 50.10551240083953; longitude: 14.450827988445251" 
			>
		</a-entity>
		<a-entity
			gltf-model="./assets/Text-circle-ND.gltf" 
			animation-mixer="timeScale: 0.5"
			rotation="0 0 0" 
			scale="1 1 1"
			gps-entity-place="latitude: 50.10552057517258; longitude: 14.45014306582761" 
			>
		</a-entity>
	</a-scene>
</body>
</html>